{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import\"./Register.css\";import axios from\"axios\";import{ToastContainer,toast}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Register(){const[name,setName]=useState(\"\");const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const[confirmPassword,setConfirmPassword]=useState(\"\");const[showPassword,setShowPassword]=useState(false);const[confirmError,setConfirmError]=useState(\"\");const[registered,setRegistered]=useState(false);const handleSubmit=()=>{const errors=validateInputs();if(errors.length>0){return;}if(password!==confirmPassword){setConfirmError(\"As palavras passe não coincidem\");return;}const url=\"https://familia-gouveia-0f628f261ee1.herokuapp.com/components/registar.php\";let fData=new FormData();fData.append(\"name\",name);fData.append(\"email\",email);fData.append(\"password\",password);fData.append(\"newRegistration\",true);axios.post(url,fData,{headers:{'Content-Type':'multipart/form-data'}}).then(response=>{if(response.data===\"error=email_exists\"){toast.error(\"O e-mail já existe\");}else if(response.data===\"success\"){// O usuário foi registrado com sucesso e o administrador foi notificado\ntoast.success(\"Registro bem-sucedido! Aguarde a aprovação do administrador.\");setRegistered(true);}else{// Trate outros erros aqui\ntoast.error(response.data);}}).catch(error=>toast.error(error));};const validateInputs=()=>{let errors=[];if(name.length===0){errors.push(\"Insira o seu nome\");}if(email.length===0){errors.push(\"Insira o seu email\");}else if(!email.match(/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$/)){errors.push(\"Insira um email válido\");}if(password.length===0){errors.push(\"Insira a palavra passe\");}else if(password.length<8){errors.push(\"A palavra passe deve ter pelo menos 8 caracteres\");}document.getElementById(\"name-error\").textContent=errors.find(e=>e.includes(\"nome\"))||\"\";document.getElementById(\"email-error\").textContent=errors.find(e=>e.includes(\"email\"))||\"\";document.getElementById(\"password-error\").textContent=errors.find(e=>e.includes(\"palavra passe\"))||\"\";return errors;};useEffect(()=>{if(registered){setName(\"\");setEmail(\"\");setPassword(\"\");setConfirmPassword(\"\");setRegistered(false);}},[registered]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container-form\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",id:\"name\",value:name,onChange:e=>setName(e.target.value),placeholder:\"Nome completo\",required:true}),/*#__PURE__*/_jsx(\"span\",{id:\"name-error\",className:\"error\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",id:\"email\",value:email,onChange:e=>setEmail(e.target.value),placeholder:\"E-mail\",required:true}),/*#__PURE__*/_jsx(\"span\",{id:\"email-error\",className:\"error\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\"}),/*#__PURE__*/_jsx(\"input\",{type:showPassword?\"text\":\"password\",name:\"password\",id:\"password\",value:password,onChange:e=>setPassword(e.target.value),placeholder:\"Palavra-passe\",required:true}),/*#__PURE__*/_jsx(\"span\",{id:\"password-error\",className:\"error\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"confirm-password\"}),/*#__PURE__*/_jsx(\"input\",{type:showPassword?\"text\":\"password\",name:\"confirm-password\",id:\"confirm-password\",value:confirmPassword,onChange:e=>setConfirmPassword(e.target.value),placeholder:\"Confirmar palavra-passe\",required:true}),/*#__PURE__*/_jsx(\"span\",{id:\"confirm-error\",className:\"error\",children:confirmError}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"show-password\",children:\"Ver palavra-passe\"}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"show-password\",id:\"show-password\",checked:showPassword,onChange:e=>setShowPassword(e.target.checked)}),/*#__PURE__*/_jsx(\"input\",{type:\"button\",name:\"send\",id:\"send\",value:\"Submeter\",onClick:handleSubmit})]}),/*#__PURE__*/_jsx(ToastContainer,{})]});}export default Register;","map":{"version":3,"names":["React","useState","useEffect","axios","ToastContainer","toast","jsx","_jsx","jsxs","_jsxs","Register","name","setName","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","showPassword","setShowPassword","confirmError","setConfirmError","registered","setRegistered","handleSubmit","errors","validateInputs","length","url","fData","FormData","append","post","headers","then","response","data","error","success","catch","push","match","document","getElementById","textContent","find","e","includes","children","className","htmlFor","type","id","value","onChange","target","placeholder","required","checked","onClick"],"sources":["/Users/yavam/Documents/famillia-app/frontend/src/Components/Pages/LoginSignup/register.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./Register.css\";\nimport axios from \"axios\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nfunction Register() {\n  const [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n  const [showPassword, setShowPassword] = useState(false);\n  const [confirmError, setConfirmError] = useState(\"\");\n  const [registered, setRegistered] = useState(false);\n  const handleSubmit = () => {\n    const errors = validateInputs();\n    if (errors.length > 0) {\n      return;\n    }\n    if (password !== confirmPassword) {\n      setConfirmError(\"As palavras passe não coincidem\");\n      return;\n    }\n    const url = \"https://familia-gouveia-0f628f261ee1.herokuapp.com/components/registar.php\";\n    let fData = new FormData();\n    fData.append(\"name\", name);\n    fData.append(\"email\", email);\n    fData.append(\"password\", password);\n    fData.append(\"newRegistration\", true);\n    axios\n      .post(url, fData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      })\n      .then((response) => {\n        if (response.data === \"error=email_exists\") {\n          toast.error(\"O e-mail já existe\");\n        } else if (response.data === \"success\") {\n          // O usuário foi registrado com sucesso e o administrador foi notificado\n          toast.success(\"Registro bem-sucedido! Aguarde a aprovação do administrador.\");\n          setRegistered(true);\n        } else {\n          // Trate outros erros aqui\n          toast.error(response.data);\n        }\n      })\n      .catch((error) => toast.error(error));\n  };\n  const validateInputs = () => {\n    let errors = [];\n    if (name.length === 0) {\n      errors.push(\"Insira o seu nome\");\n    }\n    if (email.length === 0) {\n      errors.push(\"Insira o seu email\");\n    } else if (!email.match(/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$/)) {\n      errors.push(\"Insira um email válido\");\n    }\n    if (password.length === 0) {\n      errors.push(\"Insira a palavra passe\");\n    } else if (password.length < 8) {\n      errors.push(\"A palavra passe deve ter pelo menos 8 caracteres\");\n    }\n    document.getElementById(\"name-error\").textContent =\n      errors.find((e) => e.includes(\"nome\")) || \"\";\n    document.getElementById(\"email-error\").textContent =\n      errors.find((e) => e.includes(\"email\")) || \"\";\n    document.getElementById(\"password-error\").textContent =\n      errors.find((e) => e.includes(\"palavra passe\")) || \"\";\n    return errors;\n  };\n  useEffect(() => {\n    if (registered) {\n      setName(\"\");\n      setEmail(\"\");\n      setPassword(\"\");\n      setConfirmPassword(\"\");\n      setRegistered(false);\n    }\n  }, [registered]);\n  return (\n    <div>\n      <div className=\"container-form\">\n\n        <label htmlFor=\"name\"></label>\n        <input type=\"text\" name=\"name\" id=\"name\" value={name} onChange={(e) => setName(e.target.value)} placeholder=\"Nome completo\" required />\n        <span id=\"name-error\" className=\"error\"></span>\n        <label htmlFor=\"email\"></label>\n        <input type=\"email\" name=\"email\" id=\"email\" value={email} onChange={(e) => setEmail(e.target.value)} placeholder=\"E-mail\" required />\n        <span id=\"email-error\" className=\"error\"></span>\n        <label htmlFor=\"password\"></label>\n        <input type={showPassword ? \"text\" : \"password\"} name=\"password\" id=\"password\" value={password} onChange={(e) => setPassword(e.target.value)} placeholder=\"Palavra-passe\" required />\n        <span id=\"password-error\" className=\"error\"></span>\n        <label htmlFor=\"confirm-password\"></label>\n        <input type={showPassword ? \"text\" : \"password\"} name=\"confirm-password\" id=\"confirm-password\" value={confirmPassword} onChange={(e) => setConfirmPassword(e.target.value)} placeholder=\"Confirmar palavra-passe\" required />\n        <span id=\"confirm-error\" className=\"error\">{confirmError}</span>\n        <label htmlFor=\"show-password\">Ver palavra-passe</label>\n        <input type=\"checkbox\" name=\"show-password\" id=\"show-password\" checked={showPassword} onChange={(e) => setShowPassword(e.target.checked)} />\n        <input type=\"button\" name=\"send\" id=\"send\" value=\"Submeter\" onClick={handleSubmit} />\n\n      </div >\n      <ToastContainer />\n    </div>\n  );\n}\nexport default Register;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}